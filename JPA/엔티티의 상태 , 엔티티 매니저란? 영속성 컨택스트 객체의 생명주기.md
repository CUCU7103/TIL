# 엔티티의 상태, 엔티티 매니저란?, 영속성 컨택스트 객체의 생명주기

### 엔티티(Entity)는 영속성 컨택스트를 기준으로 4가지 상태를 가집니다.

#### 1. 비영속 

- 객체가 생성되었지만 영속성 컨택스트에 관리되지 않는 상태
- DB나 JPA와 아무 관련 없는 자바 객체

#### 2. 영속

- 엔티티가 영속성 컨택스트에 저장되어 관리되어지는 상태입니다.
- 1차 캐시, 쓰기 지연, 변경 감지의 대상입니다

#### 3. 준영속

- 이전에는 영속 상태였으나 영속성 컨택스트에서 분리된 상태
- 영속성 컨텍스트가  닫히면 그 안에 있던 영속 객체는 준영속 상태가 된다.

#### 4. 삭제

- 영속성 컨택스트에서 관리되고 있으나 삭제하기로 표시된 상태
- 다음 flush 작업 때 delete 쿼리가 지연 저장소에 들어갑니다.



### 엔티티 매니저

- 영속성 컨택스트에 대한 작업을 수행함으로써 자바 프로그램과 데이터베이스 사이를 연결하는 역할을 합니다.
  - 즉 엔티티의 상태를 바꿈으로써 자바 프로그램과 데이터베이스 사이를 연결한다.
  - 엔티티 매니저는 메서드를 통해 영속성 컨택스트와 소통하면서 엔티티의 상태를 바꾼다.



엔티티의 생명주기,  매니저가 사용하는 함수들

![image](https://github.com/user-attachments/assets/e5fed803-1087-49b6-b1eb-8519f6afb286)




