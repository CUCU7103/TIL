# HashMap에서 평균 O(1) 조회 시간을 달성하기 위한 중요한 조건



1. **로드팩터(Load Factor) 관리:**

   - **<u>로드팩터는 해시 테이블에 저장된 요소의 수를 버킷(bucket)의 수로 나눈 비율을 의미합니다.</u>** 
   - **로드팩터가 낮을수록 각 버킷에 담긴 요소 수가 적어져 충돌 체인이 짧아집니다**. 
   - 요소 수가 증가하여 **로드팩터가 특정 임계값(예: 0.75)을 초과하면, 해시 테이블은 크기를 재조정(리사이징)하여 버킷 수를 늘립**니다. 
     - **이렇게 함으로써 각 버킷 당 요소 수를 다시 적게 유지할 수 있고, 결국 평균 조회 시간 O(1)을 확보할 수 있습니다**.

2.  **효율적인 해쉬 충돌 해결전략**

    - 아무리 성능 좋은 해시 함수가 있다고 하더라도 해시 충돌은 피할 수가 없습니다.
      - 즉 충돌을 효과적으로 관리하는 것이 필요합니다
      - 현재 java 8 이후 해시 맵에서는 일정 횟수 이상의 충돌이 발생하면 버킷 내 구조를 연결리스트에서 레드블랙 트리 구조로 **변환하여 최악의 경우도 O(log n)으로 제한하고, 평균적으로 여전히 O(1)에 가까운 조회성능을 비교합니다.**
        - java8 이전에는  해시 테이블 구현에서는 하나의 버킷(bucket)에 충돌로 인해 모인 여러 엔트리들을 단순 연결 리스트(Linked List)로 관리하였습니다.  
          - 이러한 경우 최악의 경우 O(n)의 시간복잡도를 가지게 됩니다.

    

    

**Java 8 HashMap:**

- 초기에는 버킷에 담긴 요소가 적을 때 연결 리스트를 사용합니다. 평균 O(1) 조회가 가능하지만 많은 요소가 모이면 최악의 경우 O(n) 조회 시간이 됩니다.
- 만약 버킷 안에 요소가 일정 개수(예: 8개 이상) 이상 쌓이면 연결 리스트를 레드-블랙 트리로 변환합니다.
- 레드-블랙 트리를 사용하면 동일 버킷 내에 많은 요소가 있어도 조회 시간이 최악의 경우 O(n) 대신 O(log n)으로 줄어듭니다.
