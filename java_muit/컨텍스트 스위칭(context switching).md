# 컨텍스트 스위칭(context switching)

> [!NOTE]
>
> ## context란?
>
> - #### 컨텍스트는 CPU가 특정 작업을 실행하기 위해 필요한 정보(레지스터 값, 프로그램 카운터 등)의 집합을 의미합니다.

- #### 멀티태스킹 시스템에서의 컨텍스트 스위칭

  - 멀티태스킹
    - 단일 CPU가 여러 작업을 동시에 수행하는 것처럼 보이게 하는 것을 의미한다.
    - 소프트웨어 기반으로 cpu 시간을 분할하여 각 작업에 할당함

  ![image](https://github.com/user-attachments/assets/b057edde-94d6-40f5-8e92-5c53eb3560dd)


  ![image](https://github.com/user-attachments/assets/88c4d29b-631a-44a7-a66a-9ab326f187cd)


  ![image](https://github.com/user-attachments/assets/b6460822-df63-4f95-a6ff-082847af5287)


- 멀티태스킹 환경에서 <u>**CPU가 한 작업에서 다른 작업으로 전환할때 발생하는 과정**</u>입니다.

- 현재 실행 중인 작업의 컨텍스트를 저장하고, 다음에 실행할 작업의 컨텍스트를 불러와 CPU가 이를 실행하게 됩니다.

- 이를 통해서 운영 체제는 여러 작업을 동시에 실행하는 것처럼 보이게 할 수 있고, 사용자에게 여러 프로그램을 동시에 실행하는 환경을 제공하며, 시스템의 자원을 효율적으로 사용할 수있게 합니다.

- #### **즉 이를 통해 다중 작업이 원활하게 이루어지며, 사용자에게 동시에 여러 작업이 수행되는 것처럼 보이게 합니다**

### 컨텍스트 스위칭의 동작 과정

1. 현재 프로세스의 상태 저장:

   - <u>CPU가 현재 실행 중인 프로세스의 레지스터, 프로그램 카운터, 스택 포인터 등 중요한 상태 정보를 저장</u>합니다.

2. 다른 프로세스의 상태 복원:

   - <u>전환하려는 다음 프로세스의 저장된 상태 정보를 메모리에서 불러와 CPU 레지스터 등에 로드</u>합니다.

3. 프로세스 실행 재개:

   - <u>복원된 상태를 기반으로 새로운 프로세스가 이전에 중단된 지점부터 실행</u>을 시작합니다.

     

### 컨텍스트 스위칭의 필요성

- **멀티태스킹 지원**: 여러 프로세스나 스레드가 동시에 실행되는 환경에서 각 작업이 공평하게 CPU 시간을 할당받아 실행될 수 있도록 합니다.

- **CPU 자원 최적화**: 하나의 프로세스가 입출력(I/O) 작업 등으로 대기 상태일 때, CPU를 다른 작업에 할당하여 자원의 효율성을 높입니다.

  

### 컨텍스트 스위칭의 오버헤드

**컨텍스트 스위칭은 필수적이지만, 다음과 같은 오버헤드가 발생합니다:**

- **시간 소모**: 상태 저장과 복원 과정에 CPU 사이클이 소요되어 전체 시스템 성능에 영향을 줄 수 있습니다.
- **캐시 효율 저하**: 프로세스 전환 시 CPU 캐시가 초기화되거나 덮어씌워져 캐시 오염이 발생할 수 있습니다.



### 컨텍스트 스위칭의 종류

- **프로세스 컨텍스트 스위칭(Process Switching)**: 

  -  **서로 다른 프로세스에 속한 스레드 간의 컨텍스트 스위칭이 발생**

- **스레드 컨텍스트 스위칭(Thread Switching)**: 

  - **같은 프로세스 내에서 여러 스레드 간 전환하는 것**으로, 메모리 공간을 공유하여 프로세스 컨텍스트 스위칭 보다 빠른 전환이 가능합니다.

    

