
---

# 멀티 프로세스 vs 멀티 스레드

### 프로세스와 스레드

1. **프로세스**
   - 운영체제 안에서 실행 중인 프로그램을 프로세스라고 합니다.
   - 프로세스는 하나 이상의 스레드를 반드시 포함합니다.
   - 프로세스는 독립된 메모리 공간을 가지며, 실행 중인 프로그램의 인스턴스입니다.
   - 프로세스는 스택, 힙, 데이터, 코드 영역으로 구성되어 있습니다.
     - **스택(Stack)**
       - 함수 호출 시 생성되는 지역 변수와 반환 주소 등이 저장되는 영역입니다.
       - 후입선출(LIFO)로 데이터를 저장하고 처리합니다.
       - 예: JVM에서 메서드 호출 시 생성되는 지역 변수와 반환 주소가 저장됩니다.
     - **힙(Heap)**
       - 프로그램 실행 중 필요할 때마다 동적으로 메모리를 할당받아 사용하는 영역입니다.
       - 동적으로 할당된 메모리는 사용 후 반드시 해제해야 하며, 해제하지 않으면 메모리 누수가 발생할 수 있습니다. (예: JVM의 GC)
     - **데이터(Data)**
       - 프로그램이 시작될 때 생성되어 프로그램 종료 시까지 유지되는 정보(전역변수, 정적 변수 등)가 저장됩니다.
     - **코드(Code)**
       - 실행할 프로그램의 코드(명령어)가 저장되는 영역입니다.
   
   ![프로세스 메모리 구조 예시](https://raw.githubusercontent.com/CUCU7103/save-image-repo/main/image/image-20250212001127922.png)
   <div align="center"><small>프로세스의 메모리 구조</small></div>

2. **스레드**
   - 프로세스는 하나 이상의 스레드를 반드시 포함합니다. (그래야 프로그램이 실행될 수 있음)
   - **스레드는 프로세스 내에서 실행되는 작업의 단위**입니다.
   - 한 프로세스에는 여러 개의 스레드가 존재할 수 있습니다.
     - *단일 스레드*: 한 프로세스 내에 하나의 스레드만 존재
     - *멀티 스레드*: 한 프로세스 내에 여러 스레드가 존재
   - 한 프로세스 내의 스레드들은 프로세스의 메모리(Code, Data, Heap)를 공유하지만, 각자 독립적인 스택 영역을 가집니다.

   ![스레드 구조 예시](https://raw.githubusercontent.com/CUCU7103/save-image-repo/main/image/image-20250212001325466.png)
   <div align="center"><small>프로세스와 스레드 구조</small></div>

---

## Context Switching이란?

- **CPU가 실행 중인 작업(프로세스 또는 스레드)을 멈추고, 다른 작업으로 전환할 때 발생하는 과정**입니다.
  - 현재 작업의 상태를 저장하고, 새 작업의 상태를 불러오는 작업이 이루어집니다.

- **왜 필요할까요?**
  - **멀티태스킹**: 여러 작업을 동시에 실행하는 것처럼 보이게 하기 위해 필요합니다.  
    - CPU(코어 1개 기준)는 한 번에 하나의 프로세스만 실행할 수 있습니다.
    - 예: 음악을 들으면서 웹 브라우저를 사용하려면, 두 프로그램이 시분할 기법(프로그램 실행 시간을 분할해 동시에 실행되는 것처럼 보이게 함)으로 번갈아 실행되어야 합니다.
  - **공정성**: 모든 작업이 CPU 시간을 공평하게 나누어 사용할 수 있도록 합니다.
  - **우선순위 처리**: 중요한 작업(예: 긴급 인터럽트)이 빠르게 실행될 수 있도록 합니다.

---

## 멀티 프로세스

- 여러 개의 프로세스를 사용하여 동시에 두 가지 이상의 일을 수행하는 것
  - **여러 개의 프로세스를 병렬적으로 실행**하여 작업을 처리하는 방식입니다.
- 특정 프로세스에서 문제가 발생해도 다른 프로세스에 영향을 미치지 않아, 격리성과 신뢰성이 높습니다.
- 작업량이 많을수록 Context Switching 비용이 증가합니다.

- **특징**
  - 각 프로세스는 독립적인 실행 단위로, 자신의 메모리(Code, Data, Heap, Stack)를 따로 가집니다.
  - 프로세스 간 통신은 IPC(Inter-Process Communication, 파이프/소켓 등)를 사용하며, 복잡하고 비용이 큽니다.
  - 하나의 프로세스에 문제가 생겨도 다른 프로세스에는 영향을 주지 않습니다.
  - Context Switching이 상대적으로 느립니다.

- **장점**
  - 안정성이 높고, 하나의 프로세스가 다운되어도 다른 프로세스에 영향 없음
  - 동기화 문제가 적음(자원을 공유하지 않기 때문)

- **단점**
  - 메모리/시스템 자원 소모가 큼
  - Context Switching 비용이 높음

---

## 멀티 스레드(Multi-Thread)

- **하나의 프로세스 내에서 여러 스레드를 실행**하여 작업을 처리하는 방식입니다.
- 스레드는 같은 프로세스 내에서 자원을 공유하며, 각각 독립적인 실행 흐름과 스택을 가집니다.

- **특징**
  - 스레드는 같은 프로세스 내에서 Code, Data, Heap 영역을 공유하며, Stack은 독립적입니다.
  - 스레드 간 통신이 쉽고 빠르며, 별도의 IPC가 필요하지 않습니다.
  - Context Switching 비용이 낮습니다.

- **장점**
  - 메모리 사용량이 적고, 시스템 자원 소모를 줄일 수 있습니다.
  - 빠른 Context Switching으로 응답성과 효율성이 높음
  - 데이터 교환이 간단하여 작업 간 협력이 용이함

- **단점**
  - 자원을 공유하기 때문에 동기화 작업이 필수이며, 동기화 문제로 병목 현상이 발생할 수 있습니다.
  - 하나의 스레드가 비정상 종료되면 전체 프로세스에 영향을 줄 수 있습니다.

![멀티스레드 구조 예시](https://raw.githubusercontent.com/CUCU7103/save-image-repo/main/image/image-20250212004721689.png)
<div align="center"><small>멀티스레드 구조</small></div>

---

궁금한 점이 있거나 추가 설명이 필요하면 말씀해 주세요!
